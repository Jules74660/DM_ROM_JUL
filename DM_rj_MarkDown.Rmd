---
title: ""
output: 
  html_document:
    theme: cosmo
    toc: true
    toc_float: true
  pdf_document:
    toc: true
---

::: {style="text-align: right;"}
Date de dernière mise à jour du document : `r Sys.Date()`
:::


::: {style="background-color: black; padding: 12px; border-radius: 5px; text-align: center; margin-bottom: 20px;"}
<strong style="color: white; font-size: 2.3em;">
  Élaboration d’un plan d’échantillonnage GRTS : cas du Crapaud Buffle (*Rhinella marina*) <br>
</strong>
:::

# Introduction

<hr style="border:2px solid gray">


Vous voulez mettre en place le suivi d'une espèce terrestre en Guadeloupe. Etant en stage de 6 mois, vous n'allez pas pouvoir aller échantillonner l'île entière. Vous aimeriez néanmoins avoir une base de données fiable concernant la présence de l'espèce dans chaque type d'habitat majoritaire de l'île.

Comme vous avez bien suivi vos cours de master, vous savez qu'il existe une base de donnée, Corine Land Cover, qui découpe la France entière en différents types de couverture des sols. Plus d'infos sur [le site internet CLC](https://www.statistiques.developpement-durable.gouv.fr/corine-land-cover-0).

Le chunk suivant vous permet de télécharger et de dézipper la base de données Corine Land Cover depuis data.gouv pour le département de la Guadeloupe.


# Chargement du jeu de données et association

<hr style="border:2px solid gray">


```{r chargement des packages, echo=FALSE, message=FALSE, warnings=FALSE,include=FALSE}

pacman::p_load(tidyverse, spsurvey, maptools, cartography, readxl, viridisLite, sf)
install.packages("maptools")

```


```{r setup, include=FALSE, echo=FALSE, message=FALSE}

getwd() # si on ouvre avec le r.proj on devrait avoir le bon chemin sinon on copie colle le résultat

Chemin <- "/Users/jules/Desktop/Master/M2/strategie_echantillonage/DM_ROM_JUL"
setwd(Chemin)

```

SI BESOIN : 

download.file('http://www.donnees.statistiques.developpement-durable.gouv.fr/donneesCLC/CLC/region/CLC_D971_UTM_SHP.zip', destfile = 'CLC')
unzip('CLC')

```{r Import,, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}

nomenclature <- readxl::read_excel("CLC_D971_UTM_SHP/CLC_nomenclature.xls")
couv2000 <- st_read("CLC_D971_UTM_SHP/CLC00/CLC00_D971_UTM.shp")
couvcarte <- st_read("CLC_D971_UTM_SHP/CLC00/CLC00_D971_UTM.shp")
couv2006 <- st_read("CLC_D971_UTM_SHP/CLC06/CLC06_D971_UTM.shp")
couv2012 <- st_read("CLC_D971_UTM_SHP/CLC12/CLC12_D971_UTM.shp")

```


## Association

```{r colonne type de sol, echo=FALSE, message=FALSE}

couv2000 <- couv2000 %>% 
  mutate(code_CLC = substr(as.character(CODE_00), 1, 1))

couv2006 <- couv2006 %>% 
  mutate(code_CLC = substr(as.character(CODE_06), 1, 1))

couv2012 <- couv2012 %>% 
  mutate(code_CLC = substr(as.character(CODE_12), 1, 1))

couvcarte <- couvcarte %>% 
  mutate(code_CLC = substr(as.character(CODE_00), 1, 1))

```

```{r association,echo=FALSE, message=FALSE}

couv2000 <- left_join(couv2000, nomenclature, by = c("code_CLC" = "code_clc_niveau_1"))
couv2006 <- left_join(couv2006, nomenclature, by = c("code_CLC" = "code_clc_niveau_1"))
couv2012 <- left_join(couv2012, nomenclature, by = c("code_CLC" = "code_clc_niveau_1"))
couvcarte <- left_join(couvcarte, nomenclature, by = c("code_CLC" = "code_clc_niveau_1"))

```


```{r 500 ha plus et pas marin, echo=FALSE, message=FALSE}

couv2000 <- couv2000 %>%
  filter(AREA_HA > 500 & code_CLC != "5")

couv2006 <- couv2006 %>%
  filter(AREA_HA > 500 & code_CLC != "5")

couv2012 <- couv2012 %>%
  filter(AREA_HA > 500 & code_CLC != "5")

couvcarte <- couvcarte %>% filter(code_CLC != "5")

```

# Cartographie de la typologie des sols {.tabset}

<hr style="border:2px solid gray">

## 2000

```{r carte couverture des sols 2000}

ggplot() +
  geom_sf(data = couvcarte, fill = "grey") +
  geom_sf(data = couv2012, aes(fill = code_CLC), color = NA) +
  scale_fill_viridis_d(option = "D", name = "Type de couverture des sols") +
  theme_minimal() +
  labs(title = "Couverture des sols en Guadeloupe",
       subtitle = "Données Corine Land Cover 2000",
       caption = "Source : data.gouv.fr") +
  theme(legend.position = "bottom")

```

## 2006

## 2012

# {-}



# Création de la population statistique

<hr style="border:2px solid gray">


# GRTS

<hr style="border:2px solid gray">



C'est une valeur arbitraire mais on justifie ce nombre par le fait que l'on veut un nombre d'échantillons gérable en 6 mois de stage.

On fait un GRTS car ...... 

# Cartographie via QGIS 

<hr style="border:2px solid gray">


::: {style="display: flex; gap: 20px; align-items: center;"}
![](Capture d’écran 2024-10-05 à 08.59.10.png){width="180"}
:::

